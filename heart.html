<!DOCTYPE html>
<html>
<head>
    <title>你动心了吗？</title>
</head>
<body>
<canvas id="pinkboard" style="width:800px;height:600px;"></canvas>
<script type='text/javascript'>
(function(){var b=0;var c=["ms","moz","webkit","o"];for(var a=0;a<c.length&&!window.requestAnimationFrame;++a){window.requestAnimationFrame=window[c[a]+"RequestAnimationFrame"];window.cancelAnimationFrame=window[c[a]+"CancelAnimationFrame"]||window[c[a]+"CancelRequestAnimationFrame"]}if(!window.requestAnimationFrame){window.requestAnimationFrame=function(h,e){var d=new Date().getTime();var f=Math.max(0,16-(d-b));var g=window.setTimeout(function(){h(d+f)},f);b=d+f;return g}}if(!window.cancelAnimationFrame){window.cancelAnimationFrame=function(d){clearTimeout(d)}}}());
var settings={particles:{length:500,duration:2,velocity:100,effect:-.75,size:20}},Point=function(){function a(a,b){this.x="undefined"!=typeof a?a:0,this.y="undefined"!=typeof b?b:0}return a.prototype.clone=function(){return new a(this.x,this.y)},a.prototype.length=function(a){return"undefined"==typeof a?Math.sqrt(this.x*this.x+this.y*this.y):(this.normalize(),this.x*=a,this.y*=a,this)},a.prototype.normalize=function(){var a=this.length();return this.x/=a,this.y/=a,this},a}(),Particle=function(){function a(){this.position=new Point,this.velocity=new Point,this.acceleration=new Point,this.age=0}return a.prototype.initialize=function(a,b,c,d){this.position.x=a,this.position.y=b,this.velocity.x=c,this.velocity.y=d,this.acceleration.x=c*settings.particles.effect,this.acceleration.y=d*settings.particles.effect,this.age=0},a.prototype.update=function(a){this.position.x+=this.velocity.x*a,this.position.y+=this.velocity.y*a,this.velocity.x+=this.acceleration.x*a,this.velocity.y+=this.acceleration.y*a,this.age+=a},a.prototype.draw=function(a,b){function c(a){return--a*a*a+1}var d=b.width*c(this.age/settings.particles.duration);a.globalAlpha=1-this.age/settings.particles.duration,a.drawImage(b,this.position.x-d/2,this.position.y-d/2,d,d)},a}(),ParticlePool=function(){function a(a){b=new Array(a);for(var c=0;c<b.length;c++)b[c]=new Particle}var b,c=0,d=0,e=settings.particles.duration;return a.prototype.add=function(a,e,f,g){b[d].initialize(a,e,f,g),d++,d==b.length&&(d=0),c==d&&c++,c==b.length&&(c=0)},a.prototype.update=function(a){var f;if(d>c)for(f=c;d>f;f++)b[f].update(a);if(c>d){for(f=c;f<b.length;f++)b[f].update(a);for(f=0;d>f;f++)b[f].update(a)}for(;b[c].age>=e&&c!=d;)c++,c==b.length&&(c=0)},a.prototype.draw=function(a,e){if(d>c)for(i=c;d>i;i++)b[i].draw(a,e);if(c>d){for(i=c;i<b.length;i++)b[i].draw(a,e);for(i=0;d>i;i++)b[i].draw(a,e)}},a}();!function(a){function b(a){return new Point(160*Math.pow(Math.sin(a),3),130*Math.cos(a)-50*Math.cos(2*a)-20*Math.cos(3*a)-10*Math.cos(4*a)+25)}function c(){requestAnimationFrame(c);var d=(new Date).getTime()/1e3,j=d-(e||d);e=d,f.clearRect(0,0,a.width,a.height);for(var k=h*j,l=0;k>l;l++){var m=b(Math.PI-2*Math.PI*Math.random()),n=m.clone().length(settings.particles.velocity);g.add(a.width/2+m.x,a.height/2-m.y,n.x,-n.y)}g.update(j),g.draw(f,i)}function d(){a.width=a.clientWidth,a.height=a.clientHeight}var e,f=a.getContext("2d"),g=new ParticlePool(settings.particles.length),h=settings.particles.length/settings.particles.duration,i=function(){function a(a){var c=b(a);return c.x=settings.particles.size/2+c.x*settings.particles.size/350,c.y=settings.particles.size/2-c.y*settings.particles.size/350,c}var c=document.createElement("canvas"),d=c.getContext("2d");c.width=settings.particles.size,c.height=settings.particles.size,d.beginPath();var e=-Math.PI,f=a(e);for(d.moveTo(f.x,f.y);e<Math.PI;)e+=.01,f=a(e),d.lineTo(f.x,f.y);d.closePath(),d.fillStyle="#ea80b0",d.fill();var g=new Image;return g.src=c.toDataURL(),g}();window.onresize=d,setTimeout(function(){d(),c()},10)}(document.getElementById("pinkboard"));
</script>

</body>
</html>